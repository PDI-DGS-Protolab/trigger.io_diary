/*! lungojs-angular-adapter - v0.0.1 - 2013-01-18
* https://github.com/acido69/lungojs-angular-adapter
* Copyright (c) 2013 Jimmy Collazos || acido69; */  
angular.module("lungo:value",[]).value("Lungo",Lungo),angular.module("lungo:data",[]).directive("icon",[function(){return{link:function(e,t,n,r){t.append('<span class="icon {{value}}"></span>'.replace("{{value}}",n.icon))}}}]).directive("image",[function(){return{link:function(e,t,n,r){t.append('<img src="{{value}}" class="icon" />'.replace("{{value}}",n.image))}}}]).directive("title",[function(){return{link:function(e,t,n,r){var i=t[0].nodeName.toLowerCase();i==="header"&&t.append('<span class="title centered">{{value}}</span>'.replace("{{value}}",n.title))}}}]).directive("back",[function(){return{link:function(e,t,n,r){var i=t[0].nodeName.toLowerCase();i==="header"&&t.append('<nav class="left"><a href="#back" data-router="section" class="left"><span class="icon {{value}}"></span></a></nav>'.replace("{{value}}",n.back))}}}]).directive("label",[function(){return{link:function(e,t,n,r){var i=t[0].nodeName.toLowerCase();(i==="a"||i==="button")&&t.append("<abbr>{{value}}</abbr>".replace("{{value}}",n.label))}}}]).directive("count",[function(){return{link:function(e,t,n,r){t.append('<span class="tag theme count">{{value}}</span>'.replace("{{value}}",n.count))}}}]).directive("pull",[function(){return{link:function(e,t,n,r){var i=t[0].nodeName.toLowerCase();i==="section"&&t.append('<div class="{{value}}" data-control="pull" data-icon="down" data-loading="black"><strong>title</strong></div>'.replace("{{value}}",n.pull))}}}]).directive("progress",[function(){return{link:function(e,t,n,r){t.append('<div class="progress"><span class="bar"><span class="value" style="width:{{value}};"></span></span></div>'.replace("{{value}}",n.progress))}}}]).directive("loading",[function(){return{link:function(e,t,n,r){t.append('<div class="loading {{value}}"><span class="top"></span><span class="right"></span><span class="bottom"></span><span class="left"></span></div>'.replace("{{value}}",n.loading))}}}]),angular.module("lungo:event",["lungo:value"]).directive("router",["Lungo","$rootElement","$rootScope","$compile",function(e,t,n,r){var i=e.Constants.ATTRIBUTE,s=e.Constants.ELEMENT,o=function(t,n,r){var i=u("aside",n[0]);i&&e.dom(n[0]).tap(a),e.dom(n[0]).tap(f)},u=function(e,t){var n=t.parentNode,r=[""];if(n)while(n&&n.nodeName!=="BODY")r.push(n.nodeName),n=n.parentNode;var i=r.join("/").toLowerCase(),s=i.lastIndexOf(e);return s>0},a=function(t){t.preventDefault(),e.View.Aside.hide()},f=function(t){t.preventDefault();var n=e.dom(this);n.data("async")?l(n):d(n)},l=function(t){e.Notification.show(),c(t.data("async"),t.data(i.ROUTER)),t[0].removeAttribute("data-async"),setTimeout(function(){d(t),e.Notification.hide()},e.Constants.TRANSITION.DURATION*2)},c=function(t,n){try{var r=h(t);p(r),n===s.ASIDE&&(e.Element.Cache.asides=e.dom(s.ASIDE))}catch(i){e.Core.log(3,i.message)}},h=function(e){return $$.ajax({url:e,async:!1,dataType:"html",error:function(){console.error(ERROR.LOADING_RESOURCE+e)}})},p=function(i){e.Core.toType(i)==="string"&&r(i)(n,function(e){t.find(s.BODY).append(e)})},d=function(e){var t=e.data(i.ROUTER);switch(t){case s.SECTION:var n=e.attr(i.HREF);v(n);break;case s.ARTICLE:m(e);break;case s.ASIDE:g(e)}},v=function(t){t=e.Core.parseUrl(t),t==="#back"?e.Router.back():e.Router.section(t)},m=function(t){var n=e.Router.History.current(),r=t.attr(i.HREF);e.Router.article(n,r,t)},g=function(t){var n=e.Router.History.current(),r=t.attr(i.HREF);e.Router.aside(n,r)};return o}]).directive("checkbox",["Lungo",function(e){var t=function(t){t.preventDefault();var n=e.dom(this),r=n.val()>0?0:1;n.toggleClass("active").attr("value",r)};return function(e,n,r){var i=n[0];$$(i).touch(t)}}]),angular.module("lungo:layout",[]).run(Lungo.Boot.Layout.init),angular.module("lungo",["lungo:value","lungo:layout","lungo:data","lungo:event"]);